import { useEffect, useState } from "react";
import { motion } from "framer-motion";
import { Github, Linkedin, Mail, FileDown, ExternalLink, GraduationCap, TerminalSquare, Award, Briefcase, Moon, SunMedium, MapPin } from "lucide-react";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";

// --- Data you can tweak fast ---
const LINKS = {
  cv: "/img/CV.pdf",
  github: "https://github.com/AliTahir10",
  linkedin: "https://www.linkedin.com/in/alitahir10/",
  email: "mailto:alitahir_@outlook.com",
  formspree: "https://formspree.io/f/xbjwnvkr",
};

const PROJECTS = [
  {
    title: "SBC Advisory",
    blurb: "Marketing site for a consulting business.",
    href: "http://sbcadvisory.co.uk",
    img: "/img/portfolio/thumbnails/deep-dreams.jpg",
    tags: ["HTML", "Bootstrap", "Hosting"],
  },
  {
    title: "Crime‑eye",
    blurb: "Web app for crime statistics and mapping.",
    href: "http://crime-eye.herokuapp.com",
    img: "/img/portfolio/thumbnails/car-data-scraping.jpg",
    tags: ["Python", "Flask", "Heroku"],
  },
  {
    title: "Simply Sweet By Asifa",
    blurb: "Bakery webapp with ordering flow.",
    href: "https://alitahir10.pythonanywhere.com/",
    img: "/img/portfolio/thumbnails/loan-repayment.jpg",
    tags: ["Python", "Django", "Stripe"],
  },
  {
    title: "alitahir.co.uk (v1)",
    blurb: "Source for legacy personal site.",
    href: "https://github.com/AliTahir10/jasond94.github.io",
    img: "/img/portfolio/thumbnails/downing-io.jpg",
    tags: ["Bootstrap", "jQuery"],
  },
  {
    title: "Operating System (Java)",
    blurb: "University project — OS in Java.",
    href: "https://gitlab.surrey.ac.uk/mt00969/os.git",
    img: "/img/portfolio/thumbnails/scrabble.jpg",
    tags: ["Java", "Systems"],
  },
  {
    title: "Processing Sub System (Java)",
    blurb: "Data processing pipeline in Java.",
    href: "https://gitlab.surrey.ac.uk/mt00969/pss.git",
    img: "/img/portfolio/thumbnails/racket-weather.jpg",
    tags: ["Java", "Pipelines"],
  },
];

const FUN = [
  { title: "Dreams", href: "/Dreams/", img: "/img/portfolio/thumbnails/dreams.jpg" },
  { title: "Mountain Biking", href: "/Mountain-Biking/", img: "/img/portfolio/thumbnails/mtn-biking.jpg" },
  { title: "Walking!", href: "/Skiing/", img: "/img/portfolio/thumbnails/skiing.jpg" },
  { title: "Spotify Playlists", href: "/Spotify/", img: "/img/portfolio/thumbnails/spotify.png" },
];

const SKILLS = [
  { group: "Languages", items: ["Python", "Java", "JavaScript", "C/C++/C#", "HTML/CSS"] },
  { group: "Frontend", items: ["React", "Tailwind", "Bootstrap", "Vite"] },
  { group: "Backend", items: ["Ruby on Rails", "Django", "Flask", "Node.js"] },
  { group: "Tools", items: ["Git", "Linux", "Docker", "CI/CD"] },
];

const EXPERIENCE = [
  {
    role: "Team Delivery Manager",
    org: "LHR",
    when: "2023 – Present",
    icon: <Briefcase className="h-5 w-5" />,
    bullets: ["Led cross‑functional teams to deliver projects on time", "Streamlined ops flows across shifts"],
  },
  {
    role: "Customer Service Agent",
    org: "LHR",
    when: "2019 – 2023",
    icon: <Briefcase className="h-5 w-5" />,
    bullets: ["High‑volume customer support in regulated environment"],
  },
  {
    role: "IT Support Engineer",
    org: "FootfallCam",
    when: "2021 – 2022",
    icon: <TerminalSquare className="h-5 w-5" />,
    bullets: ["Deployed/maintained people‑counting systems", "Wrote internal tooling to speed triage"],
  },
  {
    role: "Peer Assisted Learning Support",
    org: "University of Surrey",
    when: "2020 – 2022",
    icon: <Award className="h-5 w-5" />,
    bullets: ["Mentored students in CS fundamentals"],
  },
];

export default function Portfolio() {
  const [dark, setDark] = useState(true);
  useEffect(() => {
    document.documentElement.classList.toggle("dark", dark);
  }, [dark]);

  return (
    <div className="min-h-screen bg-gradient-to-b from-slate-50 to-white dark:from-slate-950 dark:to-slate-900 text-slate-800 dark:text-slate-100">
      {/* Nav */}
      <header className="sticky top-0 z-50 backdrop-blur supports-[backdrop-filter]:bg-white/60 bg-white/80 dark:bg-slate-900/70 border-b border-slate-200/60 dark:border-slate-800">
        <div className="mx-auto max-w-6xl px-4 py-3 flex items-center justify-between">
          <a href="#home" className="font-semibold tracking-tight text-lg">Ali Tahir</a>
          <nav className="hidden md:flex gap-6 text-sm">
            <a href="#about" className="hover:opacity-80">About</a>
            <a href="#skills" className="hover:opacity-80">Skills</a>
            <a href="#experience" className="hover:opacity-80">Experience</a>
            <a href="#projects" className="hover:opacity-80">Projects</a>
            <a href="#fun" className="hover:opacity-80">Fun</a>
            <a href="#contact" className="hover:opacity-80">Contact</a>
          </nav>
          <div className="flex items-center gap-2">
            <Button variant="ghost" size="icon" onClick={() => setDark((d) => !d)} aria-label="Toggle theme">
              {dark ? <SunMedium className="h-5 w-5" /> : <Moon className="h-5 w-5" />}
            </Button>
            <Button asChild>
              <a href={LINKS.cv}><FileDown className="h-4 w-4 mr-2" />CV</a>
            </Button>
          </div>
        </div>
      </header>

      {/* Hero */}
      <section id="home" className="relative mx-auto max-w-6xl px-4 pt-16 md:pt-28 pb-10">
        <motion.div initial={{ opacity: 0, y: 24 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 0.6 }} className="grid md:grid-cols-2 gap-8 items-center">
          <div>
            <div className="inline-flex items-center gap-2 rounded-full border border-slate-200 dark:border-slate-800 px-3 py-1 text-xs font-medium mb-4">
              <MapPin className="h-3.5 w-3.5" /> London, UK
            </div>
            <h1 className="text-4xl md:text-6xl font-bold tracking-tight leading-tight">
              Ali Tahir
            </h1>
            <p className="mt-4 text-lg text-slate-600 dark:text-slate-300 max-w-prose">
              Computer Science graduate (First‑Class Honours) from the University of Surrey. I build fast, accessible web experiences and ship reliable software.
            </p>
            <div className="mt-6 flex flex-wrap gap-3">
              <Button asChild variant="default"><a href="#projects">See Projects</a></Button>
              <Button asChild variant="outline"><a href={LINKS.github}><Github className="h-4 w-4 mr-2" />GitHub</a></Button>
              <Button asChild variant="outline"><a href={LINKS.linkedin}><Linkedin className="h-4 w-4 mr-2" />LinkedIn</a></Button>
              <Button asChild variant="secondary"><a href={LINKS.email}><Mail className="h-4 w-4 mr-2" />Email</a></Button>
            </div>
          </div>
          <div className="rounded-3xl overflow-hidden ring-1 ring-slate-200 dark:ring-slate-800 shadow-2xl">
            <img src="/img/portfolio/thumbnails/deep-dreams.jpg" alt="Dream‑like landscape header" className="w-full h-full object-cover" />
          </div>
        </motion.div>
      </section>

      {/* About / Education */}
      <section id="about" className="mx-auto max-w-6xl px-4 py-12">
        <div className="grid md:grid-cols-3 gap-8">
          <Card className="md:col-span-2">
            <CardHeader>
              <CardTitle className="flex items-center gap-2 text-xl"><GraduationCap className="h-5 w-5" /> Education</CardTitle>
            </CardHeader>
            <CardContent className="space-y-2">
              <p className="font-medium">BSc Computer Science — University of Surrey</p>
              <p className="text-sm text-slate-600 dark:text-slate-300">First Class with Honours</p>
              <p className="text-sm text-slate-600 dark:text-slate-300">Peer Assisted Learning Support (2020–2022)</p>
            </CardContent>
          </Card>
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2 text-xl"><Award className="h-5 w-5" /> Highlights</CardTitle>
            </CardHeader>
            <CardContent className="text-sm text-slate-600 dark:text-slate-300 space-y-2">
              <p>Built production webapps (Django/Rails/React).</p>
              <p>Automated workflows; reduced manual ops overhead.</p>
              <p>Love bikes, mountains, and great UX.</p>
            </CardContent>
          </Card>
        </div>
      </section>

      {/* Skills */}
      <section id="skills" className="mx-auto max-w-6xl px-4 py-12">
        <h2 className="text-2xl font-semibold mb-6 tracking-tight">Skills</h2>
        <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
          {SKILLS.map((s) => (
            <Card key={s.group}>
              <CardHeader className="pb-2"><CardTitle className="text-base">{s.group}</CardTitle></CardHeader>
              <CardContent className="flex flex-wrap gap-2">
                {s.items.map((i) => (
                  <Badge key={i} variant="secondary" className="rounded-full">{i}</Badge>
                ))}
              </CardContent>
            </Card>
          ))}
        </div>
      </section>

      {/* Experience */}
      <section id="experience" className="mx-auto max-w-6xl px-4 py-12">
        <h2 className="text-2xl font-semibold mb-6 tracking-tight">Experience</h2>
        <div className="grid md:grid-cols-2 gap-4">
          {EXPERIENCE.map((e, idx) => (
            <Card key={idx} className="relative">
              <CardHeader className="pb-2">
                <CardTitle className="text-base flex items-center gap-2">{e.icon}<span>{e.role}</span></CardTitle>
              </CardHeader>
              <CardContent className="text-sm text-slate-600 dark:text-slate-300">
                <div className="flex items-center justify-between mb-2">
                  <span className="font-medium">{e.org}</span>
                  <span className="text-xs opacity-80">{e.when}</span>
                </div>
                <ul className="list-disc pl-5 space-y-1">
                  {e.bullets.map((b, i) => <li key={i}>{b}</li>)}
                </ul>
              </CardContent>
            </Card>
          ))}
        </div>
      </section>

      {/* Projects */}
      <section id="projects" className="mx-auto max-w-6xl px-4 py-12">
        <div className="flex items-end justify-between mb-6">
          <h2 className="text-2xl font-semibold tracking-tight">Projects</h2>
          <a href={LINKS.github} className="text-sm inline-flex items-center gap-1 hover:opacity-80">
            <Github className="h-4 w-4"/> <span>More on GitHub</span>
          </a>
        </div>
        <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
          {PROJECTS.map((p) => (
            <a key={p.title} href={p.href} className="group">
              <Card className="h-full overflow-hidden">
                <div className="aspect-video overflow-hidden">
                  <img src={p.img} alt={p.title} className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"/>
                </div>
                <CardHeader className="pb-2">
                  <CardTitle className="text-base flex items-center justify-between">
                    <span>{p.title}</span>
                    <ExternalLink className="h-4 w-4 opacity-70 group-hover:opacity-100" />
                  </CardTitle>
                </CardHeader>
                <CardContent className="text-sm text-slate-600 dark:text-slate-300">
                  <p className="mb-3">{p.blurb}</p>
                  <div className="flex flex-wrap gap-2">
                    {p.tags.map((t) => <Badge key={t} variant="outline" className="rounded-full">{t}</Badge>)}
                  </div>
                </CardContent>
              </Card>
            </a>
          ))}
        </div>
      </section>

      {/* Fun */}
      <section id="fun" className="mx-auto max-w-6xl px-4 py-12">
        <h2 className="text-2xl font-semibold mb-6 tracking-tight">Fun</h2>
        <div className="grid sm:grid-cols-2 lg:grid-cols-4 gap-6">
          {FUN.map((f) => (
            <a key={f.title} href={f.href} className="group">
              <Card>
                <div className="aspect-[4/3] overflow-hidden rounded-b-none">
                  <img src={f.img} alt={f.title} className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"/>
                </div>
                <CardHeader className="pb-2">
                  <CardTitle className="text-base">{f.title}</CardTitle>
                </CardHeader>
              </Card>
            </a>
          ))}
        </div>
      </section>

      {/* Contact */}
      <section id="contact" className="mx-auto max-w-6xl px-4 py-12">
        <div className="grid md:grid-cols-2 gap-8 items-start">
          <div>
            <h2 className="text-2xl font-semibold tracking-tight mb-2">Contact</h2>
            <p className="text-slate-600 dark:text-slate-300 mb-4">If you have an interesting opportunity in London, drop me a message. Please include company name and a JD if you'd like a reply.</p>
            <div className="flex gap-3">
              <Button asChild variant="outline"><a href={LINKS.email}><Mail className="h-4 w-4 mr-2"/>Email</a></Button>
              <Button asChild variant="outline"><a href={LINKS.linkedin}><Linkedin className="h-4 w-4 mr-2"/>LinkedIn</a></Button>
              <Button asChild variant="outline"><a href={LINKS.github}><Github className="h-4 w-4 mr-2"/>GitHub</a></Button>
            </div>
          </div>
          <Card>
            <CardHeader>
              <CardTitle className="text-base">Message me</CardTitle>
            </CardHeader>
            <CardContent>
              <form action={LINKS.formspree} method="POST" className="space-y-3">
                <input name="name" placeholder="Your name" required className="w-full rounded-xl border border-slate-300 dark:border-slate-700 bg-transparent px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-slate-400" />
                <input name="email" type="email" placeholder="Your email" required className="w-full rounded-xl border border-slate-300 dark:border-slate-700 bg-transparent px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-slate-400" />
                <textarea name="message" placeholder="Your message" required rows={4} className="w-full rounded-xl border border-slate-300 dark:border-slate-700 bg-transparent px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-slate-400" />
                <input type="hidden" name="_subject" value="New email from Contact form" />
                <input type="hidden" name="_next" value="/thanks.html" />
                <Button type="submit" className="w-full">Send</Button>
              </form>
            </CardContent>
          </Card>
        </div>
      </section>

      {/* Footer */}
      <footer className="border-t border-slate-200 dark:border-slate-800 py-10">
        <div className="mx-auto max-w-6xl px-4 text-center text-sm text-slate-600 dark:text-slate-400">
          <p>
            © {new Date().getFullYear()} Ali Tahir. Built with React & Tailwind. Based on a fresh, accessible design. 
          </p>
          <p className="mt-2">
            Theme inspired by shadcn/ui. Legacy site was powered by Bootstrap.
          </p>
        </div>
      </footer>
    </div>
  );
}
